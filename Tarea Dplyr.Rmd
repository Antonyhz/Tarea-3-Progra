---
title: "Tarea 3"
author: "Kevin Huanca"
date: "18/1/2022"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

##DESARROLLO DE LA TAREA DPLYR
# Comenzamos llamando a la libreria dplyr, nycflingts13 y ggplt2
library(dplyr)
library(tidyverse)
library(ggplot2)
library(nycflights13)
nycflights13::flights

 
```{r}
library(dplyr)
library(nycflights13)
nycflights13::flights
 
##1.
    flights %>% 
      filter(arr_time>=120)
  
```

  ##2.
```{r}

   vuelos01 <-flights %>%
       filter(dest=="IAH" | dest=="HOU")
vuelos01     

```


  ##3.
```{r}

flights %>%
  filter(carrier=="UA" | carrier=="AA" | carrier=="DL")
```

  ##4.
```{r}

vuelos02 <-flights %>% filter(month == 7 | month == 8 | month == 9)

vuelos02
```

  ##5
```{r}
  

    flights %>% 
        filter(arr_time>=120, dep_delay<=0)
```
  ##6
```{r}
  
    flights %>%
       filter(dep_delay - arr_delay>=30, arr_delay>=60)



```

  ##7
```{r}
  

    flights %>%
        filter(dep_time==2400 | dep_time<=600)
```


  ##2.Otra función de dplyr que es útil para usar filtros es between(). ¿Qué hace? ¿Puedes usarla para simplificar el código necesario para responder a los desafíos anteriores?
```{r}
#Esta funcion nos permite filtrar filas que se encuentren dentro de un limite min y max que establece between
    lim_inf <-7 #julio
    lim_sup <-9 #septiemnbre
    x <-8
    between(lim_inf,lim_sup,x)
    
```

  #3.¿Cuántos vuelos tienen datos faltantes en horario_salida? ¿Qué otras variables tienen valores faltantes? ¿Qué representan estas filas?
```{r}
 
    Datos_Na <-flights$sched_dep_time
    
  ## is.na(Datos_Na)  
sum(is.na(Datos_Na))

```

   ##Parte 2: Dplyr - arrange
  ##1
  
```{r}
names(flights)[colSums(is.na(flights)) >0]


flights %>% 
  arrange(desc(is.na(dep_time)),
          desc(is.na(dep_delay)),
          desc(is.na(arr_time)), 
          desc(is.na(arr_delay)),
          desc(is.na(tailnum)),
          desc(is.na(air_time)))

```
 
  ##2

```{r}
flights %>% 
  arrange(dep_delay)

retraso <-flights %>% 
  arrange(desc(dep_delay)) 
  
head(retraso,5)
```



  ##3
```{r}
velocidad <-flights %>%
  arrange(desc(air_time))
head(velocidad,5)
```

  ##4
```{r}
distancia <-flights %>%
  arrange(desc(distance))
head(distancia,5)
tail(distancia,5)

```

 #Parte 3: Dplyr - select
  ##1
```{r}
flights %>%
  select(dep_time, dep_delay, arr_time, arr_delay)

flights %>%
  select(starts_with("dep"), starts_with("arr"))

flights %>%
  select("dep_time", "dep_delay", "arr_time", "arr_delay")

flights %>%
  select(matches("^(dep|arr)_(time|delay)$"))
```

  ##2
```{r}

flights %>%
  select(air_time, air_time, dep_delay)
```


  ##3
```{r}
Demora_deposito <-flights$dep_delay
m <-c("Tiempo", "transportista", "vuelos", "dep_delay", "air_time")

flights %>%
  select(any_of(m))


```

#Parte 4: Dplyr - mutate

  ##1.Las variables horario_salida y salida_programada tienen un formato conveniente para leer, pero es difícil realizar cualquier 
#cálculo con ellas porque no son realmente números continuos.Transfórmalas hacia un formato más conveniente como número de minutos desde la medianoche.
###horario_salida
```{r}
transmute(
  flights,
  dep_time,
  hour = dep_time %/% 100,
  minute = dep_time %% 100,
  newhours = hour * 60 + minute)
```


  ##2.Salida_programada
```{r}
transmute(
  flights,
  dep_time,
  hour = sched_dep_time %/% 100,
  minute = sched_dep_time %% 100,
  newhours = hour * 60 + minute
)

```

  ##Compara tiempo_vuelo con horario_llegada - horario_salida. ¿Qué esperas ver? ¿Qué ves? ¿Qué necesitas hacer para arreglarlo? tiempo_vuelo con horario_llegada - horario_salida
```{r}
# air_time == (arr_time - dep_time)
```


  #arr_time - dep_time
```{r}
diferencia <-transmute(
  flights,
  diferencia = arr_time - dep_time,)
```


#obtengo la columna de air_time
```{r}
diferencia2 <-transmute(
  flights,
  air_time ,)
```

#luego comparamos 
```{r}
#diferencia2 <= diferencia
#diferencia2 > diferencia
#iferencia2 != diferencia
#diferencia2 >= diferencia
```

#Compara horario_salida, salida_programada, y atraso_salida. ¿Cómo esperarías que esos tres números estén relacionados?
##horario_salida 
```{r}
horario_salida<-transmute(
  flights,
  dep_time ,
)
```

##salida_programada
```{r}
salida_programada<-transmute(
  flights,
  sched_dep_time ,
)
```


#atraso_salida
```{r}
atraso_salida<-transmute(
  flights,
  dep_delay ,
)
```


#comparamos
```{r}
## air_time - sched_dep_time == dep_delay
```
#Encuentra los 10 vuelos más retrasados utilizando una función de ordenamiento. ¿Cómo quieres manejar los empates? Lee atentamente la documentación de min_rank().
```{r}
retraso_de_llegada<-head(arrange(flights,desc(arr_delay)),10)
retraso_de_llegada
vuelos_Retrasados<-retraso_de_llegada$arr_delay
vuelos_Retrasados
min_rank(vuelos_Retrasados)
```

#¿Qué devuelve 1:3 + 1:10? ¿Por qué?
##Nos devuelve que la longitud del objeto más largo(1:10) no 
##es un múltiplo de la longitud del objeto más corto(1:3)
#¿Qué funciones trigonométricas proporciona R?
#Nos brinda Seno en R, Coseno en R, Tangente en R y Cotangente en R:
```{r}
sin(pi/2)
cos(pi)
tan(pi/2)
2/tan(pi)
tan(pi)
tan(2*pi)
a=asin(0)
sin(a)

```

